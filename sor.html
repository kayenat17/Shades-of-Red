<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Women's Tracker</title>
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="app.css">
    <link rel="stylesheet" href="chat.css">
    <link rel="stylesheet" href="calendar.css">
</head>
<body>
    <script>
      document.addEventListener('DOMContentLoaded', function(){
        if (window.SORShell) window.SORShell.injectShell('tracker');
      });
    </script>
    <div class="container app-main" style="background:#fff;">
        <h1 style="text-align:center;color:#932424;">Women's Tracker</h1>
        
        <div id="moodTracker">
            <h2>Mood Tracker</h2>
            <label for="mood">Current Mood:</label>
            <input type="text" id="mood" class="form-control">
            <button onclick="trackMood()" class="btn btn-primary">Track Mood</button>
            <ul id="moodList"></ul>
        </div>
        <div id="calendarSection" class="mt-3 p-3" style="background:#fff;border-radius:8px;">
            <h2>Cycle Calendar & Tracker</h2>
            <div id="calendarRoot"></div>
            <div class="cal-legend">
              <span class="chip"><span class="swatch" style="background:#fde2e2"></span> Period window</span>
              <span class="chip"><span class="swatch" style="background:#e6f7f2"></span> Fertile window</span>
              <span class="chip"><span class="swatch" style="background:#fff5cc"></span> Ovulation</span>
            </div>
            <div class="cal-controls" style="margin-top:10px; flex-wrap: wrap;">
              <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
                <label for="cycleLength">Cycle length (days)</label>
                <input type="number" id="cycleLength" class="form-control" min="15" max="60" step="1" placeholder="28" style="max-width:120px;">
                <button id="saveCycleLength" class="cal-btn primary">Save</button>
              </div>
              <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-top:8px;">
                <label for="lastPeriod">Last period start</label>
                <input type="date" id="lastPeriod" class="form-control" style="max-width:180px;">
                <button onclick="calculateOvulation()" class="cal-btn">Update</button>
              </div>
              <div style="margin-top:8px; color:#5a2c2c;">
                <div id="ovulationDate"></div>
                <div id="fertileWindow" style="font-style:italic;"></div>
              </div>
            </div>
        </div>
        <div id="moodChartSection" class="mt-3 p-3" style="background:#f8efef;border-radius:8px;">
            <h2>Mood Trend</h2>
            <canvas id="moodChart" height="120"></canvas>
        </div>
        <div id="insights" class="mt-3 p-3" style="background:#f8efef;border-radius:8px;">
            <h2>Insights</h2>
            <div id="insightsContent" style="color:#3d1f1f"></div>
        </div>
       
    </div>
    <script src="app.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.21.0/dist/tf.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/universal-sentence-encoder@1.3.3/dist/universal-sentence-encoder.min.js" defer></script>
    <script src="semantic.js" defer></script>
    <script src="chat.js" defer></script>
    <script src="kb_full_loader.js" defer></script>
    <script src="calendar.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="analytics.js"></script>
    <script src="script.js"></script>
</body>
</html>
